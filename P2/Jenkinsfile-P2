def buildNumber = "Jenkins.instance.getItem('testing-PR').â€‹lastSuccessfulBuild.number"
def JOBNAME = "testing-PR"

pipeline {
    agent any

    stages {
        stage('Git') {
            steps {
                step([$class: 'WsCleanup'])
                checkout scm
            }
        }

        stage('Making Project2') {
            steps {
                echo 'Creating..'
               // Make the output directory.
                sh "mkdir -p output"
                sh "cd P2 && ls -l"
                sh "pwd"
                sh "cd .. && pwd"
                }
        }

        stage('pull artifact') {
            steps {
                copyArtifacts(
                    filter: 'test.zip',
                    projectName: env.JOBNAME,
                    fingerprintArtifacts: true,
                    selector: specific(env.BUILD_NUMBER)
                )
                sh 'unzip test.zip'
                sh 'cat archive/test.txt' 
            }
        }

    }
}
selector: [$class: 'SpecificBuildSelector', buildNumber: env.BUILD_NUMBER]